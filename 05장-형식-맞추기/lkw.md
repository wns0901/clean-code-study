# 이경원

## 형식 맞추기

---

## 형식을 맞추는 목적
- 코드의 형식은 **의사소통**의 일환
- 현재 돌아가는 코드가 다음 버전에서는 바뀔 확률 ↑
- **유지보수** 용이성과 **확장성**에 영향

<br>

## 적절한 행 길이를 유지
- 일반적으로 큰 파일보다 **작은 파일**이 이해하기 쉽다.
- 500줄을 넘지 않고서 대부분 200줄의 파일로도 커다란 프로그램을 구축할 수 있다.

<br>

## **신문 기사**처럼 작성하라
- **이름**만 보고도 올바른 모듈을 살펴보고 있는지 아닌지를 **판단**할 수 있어야 한다.

<br>

## 개념은 **빈 행**으로 분리하라
- 생각 사이에는 빈 행을 넣어 분리
- 빈 행은 **새로운 개념**이 시작한다는 시각적 단서
- 줄바꿈 → 개념 분리

<br>

## 세로 밀집도
- 세로 밀집도 → 연관성

<br>

## 수직 거리
- 서로 밀접한 개념은 세로롤 가까이 둬야 한다.
- protected 변수를 피해야 하는 이유 : 서로 밀접한 개념은 한 파일에 속해야 한다. (상속 x)
- 변수 선언 : 변수는 사용하는 위치에 최대한 가까이 선언
  - 지역 변수 : 각 함수의 맨 처음에 선언
  - 인스턴스 변수 : 클래스 맨 처음에 선언 (잘 알려진 위치에 인스턴스 변수를 모으기)
  - 종속 함수 : 한 함수가 다른 함수를 호출한다면 두 함수는 세로로 가까이 배치 (호출하는 함수를 호출되는 함수의 앞에 배치)
  - 개념적 유사성 : 개념적 친화도가 높은 코드 (함수가 다른 함수를 호출하는 직접적 종속성, 변수와 그 변수를 사용하는 함수, 비슷한 동작을 수행하는 일군의 함수)

<br>

#### 가위 규칙(C++)
> C++에서 클래스의 멤버 변수를 선언할 때 인스턴스 변수를 마지막에 선언하는 순서와 관련된 개념

- 이유
- 메모리 정렬 최적화
- 가상 함수 테이블 접근 최적화
- 즉, **성능상의 이슈**를 해결하기 위함

<br>

## 세로 순서
- 위에서 아래로 코드를 읽을 때 첫 함수 몇 개만 읽어도 **개념을 파악**하기 쉽게

<br>

## 가로 형식 맞추기

<br>

## 가로 공백과 밀집도
- 함수와 인수는 서로 밀접하기 떄문에 함수의 이름과 이어지는 괄호 사이에 공백이 없음 
- 함수를 호출하는 괄호 안에 인수는 공백으로 분리
- 연산자의 우선순위를 강조하기 위해서도 공백을 사용
- 곱셈에는 공백이 없음 (덧셈과 뺼셈은 곱셈보다 비교적 우선순위가 낮기 때문에 공백이 있음) → 가독성 측면에서 그 정도의 차이를 낼 수 있는지 의문..

<br>

## 가로 정렬

```java
private     Socket          socket;
private     InputStream     input;
private     OutputStream    output;
private     Request         request;

public FitNessExpediter(Socket          s,
                        FitNessContext  context) throws Exception
{
    this.context =              context;
    socket =                    s;
    requestParsingTimeLimit =   10000;
}
...

⬇️⬇️⬇️

private Socket socket;
private InputStream input;
private OutputStream output;
private Request request;

public FitNessExpediter(Socket s, FitNessContext context) thorws Exception
{
    this.context = context;
    socket = s;
    requestParsingTimeLimit = 10000; 
}
```

- 위 코드처럼 된다면 독자는 변수 유형은 무시하고 변수 이름부터 읽게 된다.
- 위 코드처럼 된다면 할단 연산자보다는 오른쪽 피연산에 눈이 가게 된다.

<br>

## **들여쓰기**
- 소스 파일은 윤곽도와 계층이 비슷
- 들여쓰는 정도는 계층에서 **코드가 자리잡은 수준**에 비례
- 들여쓰기에 대한 강조!
- 짧은 코드라고 해도 결코 들여쓰기를 무시해서는 안된다.

<br>

## 가짜 범위
- 빈 while 문이나 for 문

<br>

## **팀 규칙**
- 팀에 속한다는 뜻은 자신이 선호해야 할 규칙은 팀 규칙이다.
- 스타일은 일관적이고 매끄러워야 한다.

<br>

## 정리

| 항목 | 설명 |
|-|-|
| **형식을 맞추는 목적** | 코드의 가독성과 유지보수성을 높이기 위함 |
| **적절한 행 길이** | 200~500줄 권장, 작은 파일이 이해하기 쉬움 |
| **신문 기사처럼 작성** | 모듈 이름만 보고도 역할을 파악할 수 있어야 함 |
| **빈 행으로 개념 분리** | 새로운 개념 시작을 명확히 구분 |
| **세로 밀집도 & 수직 거리** | 관련 있는 코드끼리 가까이 배치 |
| **가위 규칙 (C++)** | 인스턴스 변수는 클래스 마지막에 선언 → 메모리 정렬 & vtable 접근 최적화 |
| **가로 공백 & 밀집도** | 연산자 우선순위를 고려한 공백 사용, 함수명과 괄호 사이 공백 없음 |
| **가로 정렬 지양** | 변수 정렬보다 일관된 들여쓰기가 중요 |
| *들여쓰기* | 코드 구조를 명확히 표현, 유지보수성을 높임 |
| **가짜 범위 지양** | 불필요한 빈 `while` / `for` 문 피하기 |
| **팀 규칙 준수** | 개인 스타일보다 팀 스타일을 따를 것 |